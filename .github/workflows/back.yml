name: Build and Push to GCR

on:
  push:
    branches:
      - main
      
# Environment variables available to all jobs and steps in this workflow
#  GKE_EMAIL: ${{ secrets.GKE_EMAIL }} 
#  GKE_KEY: ${{ secrets.GKE_KEY }} 
env:
  GITHUB_SHA: ${{ github.sha }} 
  GITHUB_REF: ${{ github.ref }} 
  IMAGE: back
  REGISTRY_HOSTNAME: gcr.io


jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."

      # Setup gcloud CLI
      # some problems here:
      - name: setup gloud CLI     
        uses: GoogleCloudPlatform/github-actions/setup-gcloud@master
        with:
          version: '270.0.0'
          service_account_key: ${{ secrets.GCR_KEY }} 


#      - name: test working-directory directive
#        working-directory: back
#        run: |
#          pwd 
          
#      - run: echo "üçè This job's status is ${{ job.status }}."
 
